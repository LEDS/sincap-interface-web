<?xml version="1.0" encoding="UTF-8"?>
<ui:composition template="/WEB-INF/templates/base.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html">

    <!-- Header Includes -->
    <ui:define name="#{sects.libraries}">
        <h:outputStylesheet library="css" name="lib/jquery.dataTables.css"/>
        <h:outputStylesheet library="css" name="compiled/datatables.css"/>
    </ui:define>


    <!-- Título da página -->
    <ui:define name="#{sects.title}">
        #{msg['index.title']}
    </ui:define>
    <!-- Fim do Título -->

    <ui:param name="index" value="true"/>

    <!-- Conteúdo da página -->
    <ui:define name="#{sects.content}">
        <h:panelGroup rendered="#{sucessoObito}">
            <div class="alert alert-success">
                <i class="icon-save"/>
                Obito salvo com sucesso!
            </div>
        </h:panelGroup>

        <h:panelGroup rendered="#{obitoConfirmado}">
            <div class="alert alert-success">
                <i class="icon-save"/>
                Obito confirmado com sucesso!
            </div>
        </h:panelGroup>

        <h:panelGroup rendered="#{obitoRecusado}">
            <div class="alert alert-success">
                <i class="icon-save"/>
                Obito recusado com sucesso!
            </div>
        </h:panelGroup>

        <h:panelGroup rendered="#{sucessoEntrevista}">
            <div class="alert alert-success">
                <i class="icon-save"/>
                Entrevista salva com sucesso!
                <a target="_blank" class="btn-flat success"
                   href="#{request.contextPath}#{contextUrls.relatorios}#{contextUrls.app_notificacao_entrevista}#{contextUrls.rlt_termo_autorizacao_doacao}#{contextUrls.imprimir}/#{idEntrevista}">
                   <!--<i class="icon-file"></i>-->
                    Emitir Termo
                </a>
            </div>
        </h:panelGroup>

        <h:panelGroup rendered="#{entrevistaConfirmada}">
            <div class="alert alert-success">
                <i class="icon-save"/>
                Entrevista confirmada com sucesso!
            </div>
        </h:panelGroup>

        <h:panelGroup rendered="#{entrevistaRecusada}">
            <div class="alert alert-success">
                <i class="icon-save"/>
                Entrevista recusada com sucesso!
            </div>
        </h:panelGroup>

        <h:panelGroup rendered="#{captacaoSucesso}">
            <div class="alert alert-success">
                <i class="icon-save"/>
                Captação salva com sucesso!
            </div>
        </h:panelGroup>

        <h:panelGroup rendered="#{captacaoConfirmado}">
            <div class="alert alert-success">
                <i class="icon-save"/>
                Captação confirmada com sucesso!
            </div>
        </h:panelGroup>

        <h:panelGroup rendered="#{captacaoRecusado}">
            <div class="alert alert-success">
                <i class="icon-save"/>
                Captação recusada com sucesso!
            </div>
        </h:panelGroup>

        <h:panelGroup rendered="#{sucessoArquivamento}">
            <div class="alert alert-success">
                <i class="icon-save"/>
                Arquivado com sucesso!
            </div>
        </h:panelGroup>

        <!-- Notificações com óbito pendente de análise -->
        <h:panelGroup>
            <h:panelGroup id="abas-analista" rendered="#{request.isUserInRole('ROLE_ANALISTA')}">
                <div id="pad-wrapper" class="datatables-page">
                    <div id="content">
                        <ul id="tabs" class="nav nav-tabs" data-tabs="tabs">
                            <li class="active"><a href="#obitoPendente" data-toggle="tab"><h4 class="aba-centralizada">Óbito Pendente</h4></a></li>
                            <li><a href="#entrevistaPendente" data-toggle="tab"><h4 class="aba-centralizada">Entrevista Pendente</h4></a></li>
                            <li><a href="#captacaoPendente" data-toggle="tab"><h4 class="aba-centralizada">Captação Pendente</h4></a></li>
                            <li><a href="#arquivamento" data-toggle="tab"><h4 class="aba-centralizada">Arquivamento</h4></a></li>
                        </ul>
                    </div>
                    <div id="my-tab-content" class="tab-content">
                    <!-- Conteúdo das abas do analista b-->
                        <div class="tab-pane active" id="obitoPendente">
                            <ui:include src="/WEB-INF/components/lista-processos-analisar-obito.xhtml">
                                <!--<ui:param name="processos" value="#{processosObitoAnalisePendente}"/> -->
                            </ui:include>
                        </div>
                        <div class="tab-pane" id="captacaoPendente">
                            <!-- Notificações com captação pendente de análise -->
                            <ui:include src="/WEB-INF/components/lista-processos-analisar-captacao.xhtml">
                                <ui:param name="processos" value="#{processosCaptacoesAnalisePendente}" />
                            </ui:include>
                        </div>
                        <div class="tab-pane" id="entrevistaPendente">
                            <!-- Notificações com entrevista pendente de análise -->
                            <ui:include src="/WEB-INF/components/lista-processos-analisar-entrevista.xhtml">
                                <ui:param name="processos" value="#{processosEntrevistaAnalisePendente}" />
                            </ui:include>
                        </div>
                        <div class="tab-pane" id="arquivamento">
                            <!-- Notificações aguardando o arquivamento -->
                            <ui:include src="/WEB-INF/components/lista-processos-aguardando-arquivamento.xhtml">
                                <ui:param name="processos" value="#{processosAguardandoArquivamento}" />
                            </ui:include>
                        </div>
                    </div>
                </div>
            </h:panelGroup>
            <!-- Abas do notificador -->
            <h:panelGroup id="abas-notificador" rendered="#{request.isUserInRole('ROLE_NOTIFICADOR')}">
                <div id="pad-wrapper" class="datatables-page">
                    <div id="content">
                        <ul id="tabs" class="nav nav-tabs" data-tabs="tabs">
                            <li class="active"><a href="#obitoAguardandoCorrecao" data-toggle="tab"><h4 class="aba-centralizada">Correção de óbito </h4><h4 id="qtdDados-tabelaCorrigirObito"></h4></a></li>
                            <li><a href="#obitoAguardandoEntrevista" data-toggle="tab"><h4 class="aba-centralizada">Entrevista pendente</h4></a></li>
                            <li><a href="#entrevistaAguardandoCorrecao" data-toggle="tab"><h4 class="aba-centralizada">Correção de entrevista</h4></a></li>
                        </ul>
                        <div id="my-tab-content" class="tab-content">
                            <div class="tab-pane active" id="obitoAguardandoCorrecao">
                                <ui:include src="/WEB-INF/components/lista-processos-corrigir-obito.xhtml">
                                    <ui:param name="processos" value="#{processosObitoAguardandoCorrecao}"/>
                                </ui:include>
                            </div>
                            <div class="tab-pane" id="obitoAguardandoEntrevista">
                                <ui:include src="/WEB-INF/components/lista-obito-aguardando-entrevista.xhtml">
                                    <ui:param name="listaProcessosNotificacao" value="#{processosObitoAguardandoEntrevista}"/>
                                </ui:include>
                            </div>
                            <div class="tab-pane" id="entrevistaAguardandoCorrecao">
                                <!-- Notificações com entrevista pendente de análise -->
                                <ui:include src="/WEB-INF/components/lista-entrevista-aguardando-correcao.xhtml">
                                    <ui:param name="processos" value="#{processosEntrevistaAguardandoCorrecao}" />
                                </ui:include>
                            </div>
                        </div>
                    </div>
                </div>
            </h:panelGroup>
            <h:panelGroup id="abas-captador" rendered="#{request.isUserInRole('ROLE_CAPTADOR')}">
                <div id="pad-wrapper" class="datatables-page">
                    <div id="content">
                        <ul id="tabs" class="nav nav-tabs" data-tabs="tabs">
                            <li class="active"><a href="#obitoAguardantoEntrevista" data-toggle="tab"><h4 class="aba-centralizada">Entrevista pendente</h4></a></li>
                            <li><a href="#entrevistaAguardandoCorrecao" data-toggle="tab"><h4 class="aba-centralizada">Correção de entrevista</h4></a></li>
                            <li><a href="#entrevistaAguardandoCaptacao" data-toggle="tab"><h4 class="aba-centralizada">Captações pendentes</h4></a></li>
                            <li><a href="#captacaoAguardandoCorrecao" data-toggle="tab"><h4 class="aba-centralizada">Correção de captação</h4></a></li>
                        </ul>
                        <div id="my-tab-content" class="tab-content">
                            <div class="tab-pane active" id="obitoAguardantoEntrevista">
                                <ui:include src="/WEB-INF/components/lista-obito-aguardando-entrevista.xhtml">
                                    <ui:param name="listaProcessosNotificacao" value="#{processosObitoAguardandoEntrevista}"/>
                                </ui:include>
                            </div>
                            <div class="tab-pane" id="entrevistaAguardandoCorrecao">
                                <!-- Notificações com entrevista pendente de análise -->
                                <ui:include src="/WEB-INF/components/lista-entrevista-aguardando-correcao.xhtml">
                                    <ui:param name="processos" value="#{processosEntrevistaAguardandoCorrecao}" />
                                </ui:include>
                            </div>
                            <div class="tab-pane" id="entrevistaAguardandoCaptacao">
                                <ui:include src="/WEB-INF/components/lista-entrevista-aguardando-captacao.xhtml">
                                    <ui:param name="listaProcessosNotificacao" value="#{processosEntrevistasAguardandoCaptacao}"/>
                                </ui:include>
                            </div>
                            <div class="tab-pane" id="captacaoAguardandoCorrecao">
                                <ui:include src="/WEB-INF/components/lista-processos-corrigir-captacao.xhtml">
                                    <ui:param name="processos" value="#{processosCaptacoesAguardandoCorrecao}"/>
                                </ui:include>
                            </div>
                        </div>
                    </div>
                </div>
            </h:panelGroup>

        </h:panelGroup>

    </ui:define>

    <ui:define name="#{sects.customScripts}">
        <h:outputScript library="js" name="jquery.dataTables.js"/>

        <script type="text/javascript">
            $(document).ready(function() {
                buildTable("tabelaAnalisarObito");
                buildTable("tabelaAnalisarEntrevista");
                buildTable("tabelaAnalisarCaptacao");
                buildTable("tabelaNotificacoesAguardandoArquivamento");
                buildTable("tabelaCorrigirObito");
                buildTable("tabelaObitoAguardandoEntrevista");
                buildTable("tabelaEntrevistaAguardandoCorrecao");
                buildTable("tabelaEntrevistaAguardandoCaptacao");
                buildTable("tabelaCaptacaoAguardandoCorrecao");
                $('#tabs').tab();
            });
        </script>
    </ui:define>


    </ui:composition>

